I"<h2 id="ncc와-acg를-이용해서-db-acl-자동-처리가능할까요">NCC와 ACG를 이용해서 DB ACL 자동 처리가능할까요?</h2>

<ul>
  <li>문제는 없으나 확인할 사항이 있습니다.
    <ol>
      <li>NCC에 존재하는 IP가  NCC API의 IP 대역안에 있어야 합니다.</li>
      <li>ACG가 생성되어 있어야 합니다.</li>
    </ol>
  </li>
</ul>

<h2 id="db-acl-자동-처리-절차">DB ACL 자동 처리 절차</h2>

<ul>
  <li>새로 띄운 node의 IP주소가 NCC(Naver Container Cluster) IP 대역에 포함됩니다.</li>
  <li>DBIP2를 통해 ACG를 등록합니다.
    <blockquote>
      <ul>
        <li>ACG는 특정 IP 정보와 DB서버에서 사용할 DB계정 정보를 포함하고 있는 논리적인 그룹 or templete으로 보시면 됩니다.</li>
      </ul>
    </blockquote>
  </li>
  <li>ACG가 생성되면 ACL자동 처리가 가능한 환경이 됩니다.</li>
  <li>DBIP2를 통해 ACG에 등록된 IP로  ACL 등록 신청을하면 자동 호출이 수행됩니다.</li>
  <li>자동 요청이 되면 내부 로직에 의해 NCC쪽에 있는 API를 호출해서 자동 요청 티켓의 IP 정보와 비교합니다.
    <blockquote>
      <ul>
        <li>비교를 위해 호출해오는 API주소(<a href="http://apis.shipdock.navercorp.com:10080/api/v1/config/ippools">링크</a>)</li>
      </ul>
    </blockquote>
  </li>
  <li>자동 요청 티켓에 포함된 IP가 NCC API에 포함된 IP 대역 안에 존재하면 자동 ACL 요청이 수락됩니다.</li>
</ul>

<p><img src="https://oss.navercorp.com/OracleDBA/developer_FAQ/blob/master/assets/images/ncc.png?raw=true" alt="ncc" /></p>
:ET