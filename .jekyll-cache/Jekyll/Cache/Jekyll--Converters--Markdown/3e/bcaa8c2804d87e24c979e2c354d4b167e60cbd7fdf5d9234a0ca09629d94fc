I"<h2 id="archive-log-급증-시-어떻게-해야할까요">archive log 급증 시 어떻게 해야할까요?</h2>

<p><strong>원인</strong></p>
<ul>
  <li>개발쪽 코드 상 로직 문제로 콜수가 증가하면서 archive 양이 증가하는 경우</li>
  <li>평소보다 데이터 변경에 대한 콜수가 증가하면서 arvhice 양이 급증하는 경우</li>
</ul>

<p><strong>해결 방안</strong></p>

<p><strong>FOR developer</strong></p>
<ul>
  <li>담당 DBA에게 연락 및 개발 로직 확인.</li>
</ul>

<p><strong>FOR DBA</strong></p>
<ul>
  <li>당장 공간 확보가 필요할 경우 SE 김영훈님께 요청해서 아카이브 공간 임시 확보</li>
  <li>안정화되면 분석 진행
    <ul>
      <li>Log Miner 수행하여 heavy redo로 archive log size를 급증시킨 쿼리를 찾아보기</li>
      <li>쿼리 확인 후 개발팀에 전달</li>
    </ul>
  </li>
</ul>

<h2 id="참고-사항">참고 사항</h2>

<p><strong>아카이브 로그는 어떻게 생성될까?</strong></p>
<ul>
  <li>DML, DDL 작업이 발생하면 online redo log에 기록</li>
  <li>online redo log에 기록된 데이터는 주기적으로 redo log file에 기록</li>
  <li>redo log group이 여러 개(2개 이상) 존재하는데 group1이 full 차면  group2로 switch 됨.</li>
  <li>archive log mode가 설정되어 있으면 group2로 스위치 되고 group1의 데이터는 archive file에 저장.</li>
</ul>

<p><img src="https://oss.navercorp.com/OracleDBA/developer_FAQ/blob/master/assets/images/create_archive.jpg?raw=true" alt="archive" /></p>

<p><strong>아카이브 로그를 쌓는 이유</strong></p>
<ul>
  <li>DB에 문제가 생겼을 때 복구를 위해 사용</li>
  <li>복구할 때까지 걸리는 시간 MTTR(Mean time to recover)을 줄일 수 있음.</li>
  <li>운영 DB에서 백업 서버로 보내기 전 운영 DB에 archive 보관 필요.</li>
  <li>DBA가 운영 DB에 스토리지 가용량을 계산할 때 archive 크기를 고려함.</li>
</ul>

:ET